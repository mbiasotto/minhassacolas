{% extends 'site/layouts/base.twig' %}
{% block title %}{{ produto.titulo }} - {% endblock %}
{% block description %}{{ produto.subtitulo }}{% endblock %}

{% block content %}
    <!-- Header -->
    <header class="banner-interno">
        <div class="container">
            <div class="row align-items-center">
                <div class="col-lg-6 animate animate-left">
                    <h1>{{ produto.titulo }}</h1>
                    <p class="lead mb-4">
                        {{ produto.subtitulo }}
                    </p>
                    <a href="https://wa.me/5515974020934?text=Olá,%20gostaria%20de%20um%20orçamento%20para%20{{ produto.nome }}." target="_wp" rel="nofollow" class="btn btn-custom btn-lg">
                        <i class="bi bi-whatsapp me-2"></i>Solicitar Orçamento
                    </a>
                </div>
                <div class="col-lg-6">
                    
                </div>
            </div>
        </div>
    </header>

    <!-- Product Section -->
    <section class="py-5">
        <div class="container">
            <div class="row">
                <!-- Product Images -->
                <div class="col-lg-7 mb-4">
                    <div class="product-carousel">
                        <div id="productCarousel" class="carousel slide" data-bs-ride="carousel">
                            <div class="carousel-inner">
                                {% if produto.imagens|length > 0 %}
                                    {% for imagem in produto.imagens %}
                                        <div class="carousel-item {{ loop.first ? 'active' : '' }}">
                                            <img src="{{ base_path() }}/assets/uploads/produtos/{{ imagem.imagem }}" class="d-block w-100">
                                        </div>
                                    {% endfor %}
                                {% endif %}
                            </div>
                            {% if produto.imagens|length > 1 %}
                                <button class="carousel-control-prev" type="button" data-bs-target="#productCarousel" data-bs-slide="prev">
                                    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                                    <span class="visually-hidden">Anterior</span>
                                </button>
                                <button class="carousel-control-next" type="button" data-bs-target="#productCarousel" data-bs-slide="next">
                                    <span class="carousel-control-next-icon" aria-hidden="true"></span>
                                    <span class="visually-hidden">Próximo</span>
                                </button>
                            {% endif %}
                        </div>
                        <!-- Thumbnails -->
                        {% if produto.imagens|length > 1 %}
                            <div class="d-flex justify-content-center gap-2 mt-3">
                                {% for imagem in produto.imagens %}
                                    <img src="{{ base_path() }}/assets/uploads/produtos/{{ imagem.imagem }}" class="thumbnail-preview" alt="Thumbnail {{ loop.index }}" onclick="$('#productCarousel').carousel({{ loop.index0 }})">
                                {% endfor %}
                            </div>
                        {% endif %}
                    </div>
                </div>

                <!-- Product Info -->
                <div class="col-lg-5">
                    <h1 class="h2 mb-4">{{ produto.nome }}</h1>
                    <p class="text-muted mb-4">
                        {{ produto.descricao|raw }}
                    </p>

                    <!-- Action Buttons -->
                    <div class="d-grid gap-2 animate animate-up">
                        <a href="https://wa.me/5515974020934?text=Olá,%20gostaria%20de%20um%20orçamento%20para%20{{ produto.nome }}." target="_wp" rel="nofollow" class="btn btn-custom btn-lg">
                            <i class="bi bi-whatsapp me-2"></i>Solicitar Orçamento
                        </a>
                    </div>
                </div>
            </div>

            <!-- Product Description -->
            <div class="row mt-5">
                <div class="col-12">
                    <div class="product-details p-4 border rounded">
                        <h2 class="section-title text-center mb-4">Detalhes do Produto</h2>
                        {% if produto.detalhes %}
                            <p>
                                {{ produto.detalhes|raw }}
                            </p>
                        {% endif %}
                        
                        <div class="row mt-5">
                            <!-- Características Column -->
                            {% if produto.caracteristicas %}
                                <div class="col-md-6 mb-4 mb-md-0 animate animate-up">
                                    <div class="feature-box h-100 p-4 border rounded bg-light">
                                        <h3 class="h4 d-flex align-items-center mb-4">
                                            Características
                                        </h3>
                                        <div class="feature-list">
                                            {{ produto.caracteristicas|raw }}
                                        </div>
                                    </div>
                                </div>
                            {% endif %}
                            
                            <!-- Aplicações Column -->
                            {% if produto.aplicacao %}
                                <div class="col-md-{{ produto.caracteristicas ? '6' : '12' }} animate animate-up">
                                    <div class="feature-box h-100 p-4 border rounded bg-light">
                                        <h3 class="h4 d-flex align-items-center mb-4">
                                            Aplicações
                                        </h3>
                                        <div class="feature-list">
                                            {{ produto.aplicacao|raw }}
                                        </div>
                                    </div>
                                </div>
                            {% endif %}
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    {% include 'site/includes/produtos_relacionados.twig' %}
{% endblock %}

{% block scripts %}
<script>
    $(document).ready(function() {
        // Initialize carousel
        $('.carousel').carousel();
    });
</script>
{% endblock %}